function HideLoader(){$(".loader").addClass("hidden")}function ShowLoader(){$(".loader").removeClass("hidden")}function MessageViewModel(){var n=this;n.Id=ko.observable();n.MessageType=ko.observable();n.Value=ko.observable();n.ValueType=ko.observable();n.BeforeAfter=ko.observable();n.InOut=ko.observable();n.Message=ko.observable();n.ReservationMessages=ko.observableArray([]);n.Mode=ko.observable("ADD");n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"reservationmessage/"+n.BusinessId(),contentType:"application/json; charset=utf-8",success:function(t){var i=$.map(t.data.Model,function(n){return new ReservationMessage(n)});n.ReservationMessages(i);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddMessageRule=function(){ShowLoader();n.MessageType()==="Welcome"&&n.Value(0);n.Mode()==="ADD"?$.ajax({type:"POST",url:webserviceURL+"reservationmessage",data:{MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation message rule added successfully.","success");$("#add-new-reserve_id").modal("hide");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}):$.ajax({type:"PUT",url:webserviceURL+"reservationmessage",data:{Id:n.Id(),MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation message rule updated successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.EditMessageRule=function(t){n.ClearAll();n.Mode("UPDATE");$("#add-new-reserve_id").modal("show");n.Id(t.Id());n.MessageType(t.MessageType());$("#MessageType").val(t.MessageType());n.Value(t.Value());n.ValueType(t.ValueType());$("#ValueType").val(t.ValueType());n.BeforeAfter(t.BeforeAfter());$("#BeforeAfter").val(t.BeforeAfter());n.InOut(t.InOut());$("#InOut").val(t.InOut());n.Message(t.Message());$(".selectpicker").selectpicker("refresh")};n.DeleteMessageRule=function(t){var i=confirm("Are you sure?");i&&$.ajax({type:"DELETE",url:webserviceURL+"reservationmessage",data:{Id:t.Id()},success:function(){$.notify("Reservation message rule has been deleted.","success");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.ClearAll=function(){n.Id("");n.MessageType("");n.Value("");n.ValueType("");n.BeforeAfter("");n.InOut("");n.Message("");n.Mode("ADD")};n.Load()}function ReservationMessage(n){var t=this;t.Id=ko.observable(n.Id);t.MessageType=ko.observable(n.MessageType);t.Value=ko.observable(n.Value);t.ValueType=ko.observable(n.ValueType);t.BeforeAfter=ko.observable(n.BeforeAfter);t.InOut=ko.observable(n.InOut);t.Message=ko.observable(n.Message);t.Rules=ko.computed(function(){return n.MessageType==="Welcome"?"Welcome Message":n.Value+" "+n.ValueType+" "+n.BeforeAfter+" "+n.InOut})}function AccountSetupViewModel(){var n=this;n.UserName=ko.observable();n.Email=ko.observable();n.CurrentPassword=ko.observable();n.NewPassword=ko.observable();n.ConfirmPassword=ko.observable();n.BusinessName=ko.observable();n.FullName=ko.observable();n.Address=ko.observable();n.City=ko.observable();n.State=ko.observable();n.Zip=ko.observable();n.TimezoneOffset=ko.observable();n.TimezoneOffsetValue=ko.observable();n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"reservationsetting",contentType:"application/json; charset=utf-8",success:function(t){n.UserName(t.data.UserName);n.Email(t.data.Email);n.BusinessName(t.data.BusinessName);n.FullName(t.data.FullName);n.Address(t.data.Address);n.City(t.data.City);n.State(t.data.State);n.Zip(t.data.Zip);n.TimezoneOffset(t.data.TimezoneOffset);n.TimezoneOffsetValue(t.data.TimezoneOffsetValue);$("#timezone").val(t.data.TimezoneOffsetValue);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdateAccountSetup=function(){ShowLoader();n.TimezoneOffset($("#timezone option:selected").attr("data-offset"));n.TimezoneOffsetValue($("#timezone").val());$.ajax({type:"PUT",url:webserviceURL+"reservationsetting",data:{BusinessName:n.BusinessName(),FullName:n.FullName(),Email:n.Email(),CurrentPassword:n.CurrentPassword(),NewPassword:n.NewPassword(),ConfirmPassword:n.ConfirmPassword(),Address:n.Address(),City:n.City(),State:n.State(),Zip:n.Zip(),TimezoneOffset:n.TimezoneOffset(),TimezoneOffsetValue:n.TimezoneOffsetValue()},success:function(){$.notify("Account updated successfully.","success");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.Load()}function EventSeatingsViewModel(){var n=this;n.PassTemplateId=ko.observable();n.BusinessName=ko.observable();n.Description=ko.observable();n.FullName=ko.observable();n.Email=ko.observable();n.LogoPath=ko.observable();n.Address=ko.observable();n.City=ko.observable();n.State=ko.observable();n.Zip=ko.observable();n.VirtualNo=ko.observable();n.PhoneNo=ko.observable();n.MobileNo=ko.observable();n.TimezoneOffset=ko.observable();n.TimezoneOffsetValue=ko.observable();n.ShortUrl=ko.observable();n.MobilePageUrl=ko.observable();n.EnablePrivacyPolicy=ko.observable();n.EnableServiceTerms=ko.observable();n.EnableCommunityGuidelines=ko.observable();n.PrivacyPolicyFilePath=ko.observable();n.PrivacyPolicyFileFullPath=ko.observable();n.PrivacyPolicyFileName=ko.computed(function(){return n.PrivacyPolicyFilePath()?"Click to view":"No file chosen"});n.ServiceTermsFilePath=ko.observable();n.ServiceTermsFileFullPath=ko.observable();n.ServiceTermsFileName=ko.computed(function(){return n.ServiceTermsFilePath()?"Click to view":"No file chosen"});n.CummunityGuidelinesFilePath=ko.observable();n.CummunityGuidelinesFileFullPath=ko.observable();n.CummunityGuidelinesFileName=ko.computed(function(){return n.CummunityGuidelinesFilePath()?"Click to view":"No file chosen"});n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"reservationsetting/getbusiness/"+n.BusinessId(),contentType:"application/json; charset=utf-8",success:function(t){n.Description(t.data.Description);n.PassTemplateId(t.data.PassTemplateId);n.LogoPath(t.data.LogoPath);n.VirtualNo(t.data.VirtualNo);n.PhoneNo(t.data.PhoneNo);n.MobileNo(t.data.MobileNo);n.ShortUrl(t.data.ShortUrl);n.MobilePageUrl(window.location.origin+"/m/reservation/business/"+n.BusinessId());$("#accountlogo").attr("src",t.data.LogoFullPath);loadQrCode(t.data.ShortUrl);n.EnablePrivacyPolicy(t.data.EnablePrivacyPolicy);n.EnableServiceTerms(t.data.EnableServiceTerms);n.EnableCommunityGuidelines(t.data.EnableCommunityGuidelines);n.PrivacyPolicyFilePath(t.data.PrivacyPolicyFilePath);n.PrivacyPolicyFileFullPath(t.data.PrivacyPolicyFileFullPath);n.ServiceTermsFilePath(t.data.ServiceTermsFilePath);n.ServiceTermsFileFullPath(t.data.ServiceTermsFileFullPath);n.CummunityGuidelinesFilePath(t.data.CummunityGuidelinesFilePath);n.CummunityGuidelinesFileFullPath(t.data.CummunityGuidelinesFileFullPath);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdateProfile=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+"reservationsetting/UpdateProfile",data:{Description:n.Description(),LogoPath:n.LogoPath(),VirtualNo:n.VirtualNo(),PhoneNo:n.PhoneNo(),MobileNo:n.MobileNo(),ShortUrl:n.ShortUrl(),PassTemplateId:n.PassTemplateId(),Id:n.BusinessId(),EnablePrivacyPolicy:n.EnablePrivacyPolicy(),EnableServiceTerms:n.EnableServiceTerms(),EnableCommunityGuidelines:n.EnableCommunityGuidelines(),PrivacyPolicyFilePath:n.PrivacyPolicyFilePath(),ServiceTermsFilePath:n.ServiceTermsFilePath(),CummunityGuidelinesFilePath:n.CummunityGuidelinesFilePath()},success:function(){$.notify("Business profile updated successfully.","success");loadQrCode(n.ShortUrl());HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.Load()}function FileUpload(n,t){var r=n.target.files,f=n.target.id,u,i;if(r.length>0&&window.FormData!==undefined){for(ShowLoader(),u=new FormData,i=0;i<r.length;i++)u.append("file"+i,r[i]);$.ajax({type:"POST",url:webserviceURL+"reservationsetting/upload",contentType:!1,processData:!1,data:u,headers:{Authorization:"Bearer "+$.cookie("token")},success:function(n){t==="PrivacyPolicy"?(eventSeatingsViewModel.PrivacyPolicyFilePath(n.data.ImageName),eventSeatingsViewModel.PrivacyPolicyFileFullPath(n.data.ImageFullPath)):t==="TermsService"?(eventSeatingsViewModel.ServiceTermsFilePath(n.data.ImageName),eventSeatingsViewModel.ServiceTermsFileFullPath(n.data.ImageFullPath)):t==="CummunityGuidelines"?(eventSeatingsViewModel.CummunityGuidelinesFilePath(n.data.ImageName),eventSeatingsViewModel.CummunityGuidelinesFileFullPath(n.data.ImageFullPath)):($("#accountlogo").attr("src",n.data.ImageFullPath),eventSeatingsViewModel.LogoPath(n.data.ImageName));HideLoader()},error:function(n,t,i){HideLoader();var r="Error  "+t+" "+i;n.responseText&&n.responseText[0]==="{"?(r=JSON.parse(n.responseText).message,$.notify(r,"error")):ShowErrorMessage(n,t,i)}})}}function downloadImage(){var n=document.createElement("a");n.href=document.getElementById("qrcode").src;n.download="qrcode.png";document.body.appendChild(n);n.click()}function loadQrCode(n){if(n)try{let t=document.createElement("canvas");bwipjs.toCanvas(t,{bcid:"qrcode",text:n,scale:5});document.getElementById("qrcode").src=t.toDataURL("image/png")}catch(t){}else document.getElementById("qrcode").src="/images/noimage.png"}function MessageViewModel(){var n=this;n.Id=ko.observable();n.MessageType=ko.observable();n.Value=ko.observable();n.ValueType=ko.observable();n.BeforeAfter=ko.observable();n.InOut=ko.observable();n.Message=ko.observable();n.ReservationMessages=ko.observableArray([]);n.Mode=ko.observable("ADD");n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"reservationmessage/"+n.BusinessId(),contentType:"application/json; charset=utf-8",success:function(t){var i=$.map(t.data.Model,function(n){return new ReservationMessage(n)});n.ReservationMessages(i);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddMessageRule=function(){ShowLoader();n.MessageType()==="Welcome"&&n.Value(0);n.Mode()==="ADD"?$.ajax({type:"POST",url:webserviceURL+"reservationmessage",data:{MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation message rule added successfully.","success");$("#add-new-reserve_id").modal("hide");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}):$.ajax({type:"PUT",url:webserviceURL+"reservationmessage",data:{Id:n.Id(),MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation message rule updated successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.EditMessageRule=function(t){n.ClearAll();n.Mode("UPDATE");$("#add-new-reserve_id").modal("show");n.Id(t.Id());n.MessageType(t.MessageType());$("#MessageType").val(t.MessageType());n.Value(t.Value());n.ValueType(t.ValueType());$("#ValueType").val(t.ValueType());n.BeforeAfter(t.BeforeAfter());$("#BeforeAfter").val(t.BeforeAfter());n.InOut(t.InOut());$("#InOut").val(t.InOut());n.Message(t.Message());$(".selectpicker").selectpicker("refresh")};n.DeleteMessageRule=function(t){var i=confirm("Are you sure?");i&&$.ajax({type:"DELETE",url:webserviceURL+"reservationmessage",data:{Id:t.Id()},success:function(){$.notify("Reservation message rule has been deleted.","success");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.ClearAll=function(){n.Id("");n.MessageType("");n.Value("");n.ValueType("");n.BeforeAfter("");n.InOut("");n.Message("");n.Mode("ADD")};n.Load()}function ReservationMessage(n){var t=this;t.Id=ko.observable(n.Id);t.MessageType=ko.observable(n.MessageType);t.Value=ko.observable(n.Value);t.ValueType=ko.observable(n.ValueType);t.BeforeAfter=ko.observable(n.BeforeAfter);t.InOut=ko.observable(n.InOut);t.Message=ko.observable(n.Message);t.Rules=ko.computed(function(){return n.MessageType==="Welcome"?"Welcome Message":n.Value+" "+n.ValueType+" "+n.BeforeAfter+" "+n.InOut})}function MetricsViewModel(){var n=this;n.Date=ko.observable(moment().format("YYYY-MM-DD"));n.AvgGroupSize=ko.observable();n.Cancelled=ko.observable();n.NewGuest=ko.observable();n.NoOfPlace=ko.observable();n.AvgWaitTime=ko.observable();n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"POST",url:webserviceURL+"reservation/metrics",data:{Date:n.Date(),BusinessDetailId:n.BusinessId()},success:function(t){n.AvgGroupSize(parseInt(t.data.AvgGroupSize));n.Cancelled(t.data.Cancelled);n.NewGuest(t.data.NewGuest);n.NoOfPlace(t.data.NoOfPlace);n.AvgWaitTime(parseInt(t.data.AvgWaitTime));HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.OnChangeDate=function(){var t=$("#select_onday").val();n.Date(moment().subtract(t,"days").format("YYYY-MM-DD"));n.Load()};n.Load()}function PreferenceViewModel(){var n=this;n.OpenDayFrom=ko.observable();n.OpenDayTo=ko.observable();n.OpenHourFrom=ko.observable();n.OpenHourTo=ko.observable();n.IsLimitSizePerHour=ko.observable();n.LimitSizePerHour=ko.observable();n.IsLimitTimePerReservation=ko.observable();n.MinLimitTimePerReservation=ko.observable();n.MaxLimitTimePerReservation=ko.observable();n.IsLimitSizePerGroup=ko.observable();n.LimitSizePerGroup=ko.observable();n.IsChargeEnabled=ko.observable();n.IsDLScanEnabled=ko.observable();n.IsSeatmapEnabled=ko.observable();n.NoOfSeatRows=ko.observable();n.NoOfSeatColumns=ko.observable();n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"reservationsetting/getbusiness/"+n.BusinessId(),contentType:"application/json; charset=utf-8",success:function(t){n.OpenDayFrom(t.data.OpenDayFrom);n.OpenDayTo(t.data.OpenDayTo);n.OpenHourFrom(t.data.OpenHourFrom);n.OpenHourTo(t.data.OpenHourTo);n.IsLimitSizePerHour(t.data.IsLimitSizePerHour);n.LimitSizePerHour(t.data.LimitSizePerHour);n.IsLimitTimePerReservation(t.data.IsLimitTimePerReservation);n.MinLimitTimePerReservation(t.data.MinLimitTimePerReservation);n.MaxLimitTimePerReservation(t.data.MaxLimitTimePerReservation);n.IsLimitSizePerGroup(t.data.IsLimitSizePerGroup);n.LimitSizePerGroup(t.data.LimitSizePerGroup);n.IsChargeEnabled(t.data.IsChargeEnabled);n.IsDLScanEnabled(t.data.IsDLScanEnabled);n.IsSeatmapEnabled(t.data.IsSeatmapEnabled);n.NoOfSeatRows(t.data.NoOfSeatRows);n.NoOfSeatColumns(t.data.NoOfSeatColumns);$(".selectpicker").selectpicker("refresh");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdatePreference=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+"reservationsetting/UpdatePreference",data:{OpenDayFrom:n.OpenDayFrom(),OpenDayTo:n.OpenDayTo(),OpenHourFrom:n.OpenHourFrom(),OpenHourTo:n.OpenHourTo(),IsLimitSizePerHour:n.IsLimitSizePerHour(),LimitSizePerHour:n.LimitSizePerHour(),IsLimitTimePerReservation:n.IsLimitTimePerReservation(),MinLimitTimePerReservation:n.MinLimitTimePerReservation(),MaxLimitTimePerReservation:n.MaxLimitTimePerReservation(),IsLimitSizePerGroup:n.IsLimitSizePerGroup(),LimitSizePerGroup:n.LimitSizePerGroup(),IsChargeEnabled:n.IsChargeEnabled(),IsDLScanEnabled:n.IsDLScanEnabled(),IsSeatmapEnabled:n.IsSeatmapEnabled(),NoOfSeatRows:n.NoOfSeatRows(),NoOfSeatColumns:n.NoOfSeatColumns(),Id:n.BusinessId()},success:function(){$.notify("Preference updated successfully.","success");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.Load()}function ReservationViewModel(){var n=this;n.Id=ko.observable();n.GuestTypeId=ko.observable();n.GuestName=ko.observable();n.Size=ko.observable();n.LimitSize=ko.observable(0);n.Comments=ko.observable();n.MobileNumber=ko.observable();n.SelectedDate=ko.observable(moment().format("YYYY-MM-DD"));n.TimeFrom=ko.observable();n.TimeTo=ko.observable();n.Reservations=ko.observableArray([]);n.pagingdata=ko.observable(new PagingData({Page:1,PageSize:100,TotalData:0,TotalPages:0}));n.SearchText=ko.observable("");n.ReservationDate=ko.observable(moment().format("YYYY-MM-DD"));n.Message=ko.observable();n.ReservationGuestId=ko.observable();n.MyGuestName=ko.observable();n.MyReservationId=ko.observable();n.GuestMessages=ko.observableArray([]);n.Mode=ko.observable("NEW");n.Times=ko.observableArray([]);n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.ChatTimer={};n.LoadBusinessInfo=function(){$.ajax({type:"POST",url:webserviceURL+"reservation/getsummary",data:{Date:moment().format("YYYY-MM-DD"),BusinessDetailId:n.BusinessId()},success:function(t){n.LimitSize(t.data.LimitSize)},error:function(n,t,i){$(".loading-screen").removeClass("show");ShowErrorMessage(n,t,i)}})};n.Load=function(t){t||ShowLoader();var i="?Page="+n.pagingdata().Page()+"&PageSize="+n.pagingdata().PageSize;i=i+"&ReservationDate="+n.ReservationDate()+"&BusinessId="+n.BusinessId();n.SearchText()&&(i=i+"&SearchText="+n.SearchText());$.ajax({type:"GET",url:webserviceURL+"reservation/"+i,contentType:"application/json; charset=utf-8",success:function(t){var r=$.map(t.data.Model,function(n){return new Reservation(n)}),i;n.Reservations(r);i=new PagingData(t.data.PagingModel);n.pagingdata(i);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.LoadTimeSlots=function(t){ShowLoader();$.post(webserviceURL+"reservation/gettimeslots",{Date:n.SelectedDate(),BusinessId:n.BusinessId()},function(i){var u=$.map(i.data.TimeSlots,function(n){return new TimeSlot(n)}),r;n.Times(u);t&&(r=t.TimeFrom()+"-"+t.TimeTo(),$(".timeslots").siblings().removeClass("active"),$(".form_fifth").find(':checkbox[value="'+r+'"]').parent().addClass("active"),$(".timeslots").find(".input_chk").removeClass("tick"),$(".form_fifth").find(':checkbox[value="'+r+'"]').parent().find(".input_chk").addClass("tick"))}).always(function(){HideLoader()})};n.AddReservation=function(){ShowLoader();n.Mode()==="NEW"?$.ajax({type:"POST",url:webserviceURL+"reservation",data:{Name:n.GuestName(),MobileNo:n.MobileNumber(),GuestTypeId:n.GuestTypeId(),Size:n.Size(),Date:n.SelectedDate(),TimeFrom:n.TimeFrom(),TimeTo:n.TimeTo(),Comments:n.Comments(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation added successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}):$.ajax({type:"PUT",url:webserviceURL+"reservation",data:{Id:n.Id(),Name:n.GuestName(),MobileNo:n.MobileNumber(),GuestTypeId:n.GuestTypeId(),Size:n.Size(),Date:n.SelectedDate(),TimeFrom:n.TimeFrom(),TimeTo:n.TimeTo(),Comments:n.Comments(),ReservationGuestId:n.ReservationGuestId(),BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation updated successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.TimeInReservation=function(t){ShowLoader();$.ajax({type:"POST",url:webserviceURL+"reservation/TimeIn",data:{Id:t,BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation Time In.","success");HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.TimeOutReservation=function(t){ShowLoader();$.ajax({type:"POST",url:webserviceURL+"reservation/TimeOut",data:{Id:t,BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation Time Out.","success");HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.CancelReservation=function(t){ShowLoader();$.ajax({type:"POST",url:webserviceURL+"reservation/cancel",data:{Id:t,BusinessDetailId:n.BusinessId()},success:function(){$.notify("Reservation cancelled successfully.","success");HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.MessageGuest=function(t){$.ajax({type:"POST",url:webserviceURL+"reservation/message",data:{Id:t,MessageSent:n.Message()},success:function(){$.notify("Reservation cancelled successfully.","success");n.Load()},error:function(n,t,i){ShowErrorMessage(n,t,i)}})};n.SetSizeValue=function(t,i){n.Size($(i.currentTarget).text());$(i.currentTarget).parent().siblings().removeClass("active");$(i.currentTarget).parent().addClass("active")};n.OnChangeDate=function(){var t=event.target.value;n.ReservationDate(t);n.Load()};n.OnReservationDateChange=function(){var t=event.target.value;n.SelectedDate(t);n.LoadTimeSlots()};$(".search_input").on("keydown",function(t){t.which===13&&n.Load()});n.Add=function(){n.ClearAll();n.LoadTimeSlots();$("#add-new-reserve_id").modal("show")};n.Edit=function(t){ShowLoader();n.ClearAll();$("#add-new-reserve_id").modal("show");n.Mode("UPDATE");n.Id(t.Id());n.GuestTypeId(t.GuestTypeId());$("#GuestTypeId").val(t.GuestTypeId());n.GuestName(t.GuestName());n.Size(t.Size());$("#size"+t.Size()).parent().siblings().removeClass("active");$("#size"+t.Size()).parent().addClass("active");n.Comments(t.Comments());n.MobileNumber(t.GuestMobileNumber());n.TimeFrom(t.TimeFrom());n.TimeTo(t.TimeTo());n.ReservationGuestId(t.ReservationGuestId());n.SelectedDate(moment(t.Date()).format("YYYY-MM-DD"));n.LoadTimeSlots(t);HideLoader()};n.ShowMsg=function(t){n.ChatTimer=setInterval(function(){$.ajax({type:"POST",url:webserviceURL+"reservation/GetMessages",data:{ReservationId:t.Id()},success:function(i){n.MyReservationId(t.Id());n.MyGuestName(t.GuestName());n.GuestMessages.removeAll();var r=$.map(i.data.Model,function(n){return new GuestMessage(n)});n.GuestMessages(r)},error:function(n,t,i){ShowErrorMessage(n,t,i)}})},2e3);$.ajax({type:"POST",url:webserviceURL+"reservation/GetMessages",data:{ReservationId:t.Id()},success:function(i){n.MyReservationId(t.Id());n.MyGuestName(t.GuestName());n.GuestMessages.removeAll();var r=$.map(i.data.Model,function(n){return new GuestMessage(n)});n.GuestMessages(r);$(".chat-overlay, .chat-box").fadeIn();$(".chat-close").on("click",function(){clearInterval(n.ChatTimer)})},error:function(n,t,i){ShowErrorMessage(n,t,i)}})};n.Reply=function(){$.ajax({type:"POST",url:webserviceURL+"reservation/Message",data:{Id:n.MyReservationId(),MessageSent:n.Message()},success:function(){$("#txtReply").val("");var t={};t.ReservationId=n.MyReservationId();t.GuestName="Admin";t.MessageFrom="Admin";t.Message=linkify(n.Message());t.MessageDate=getFormatedDate(new Date);t.MessageTime=getFormatedTime(new Date);t.isReplied=ko.observable(!1);n.GuestMessages.unshift(t);HideLoader()},error:function(n,t,i){ShowErrorMessage(n,t,i)}})};n.ClearAll=function(){n.Id("");n.GuestTypeId("");n.GuestName("");n.Size("");n.Comments("");n.MobileNumber("");n.SelectedDate();n.TimeFrom();n.TimeTo();n.SearchText("");n.ReservationDate=ko.observable(moment().format("YYYY-MM-DD"));n.Message("");n.MyGuestName("");n.MyReservationId("");n.Mode=ko.observable("NEW");$(".timeslots").removeClass("active");$(".timeslots").find(".input_chk").removeClass("tick")};n.Load();n.LoadTimeSlots();n.LoadBusinessInfo();setInterval(function(){n.Load(!0)},6e4)}function Reservation(n){var t=this;t.Id=ko.observable(n.Id);t.ReservationGuestId=ko.observable(n.ReservationGuestId);t.GuestTypeId=ko.observable(n.GuestTypeId);t.Size=ko.observable(n.Size);t.Date=ko.observable(n.Date);t.TimeFrom=ko.observable(n.TimeFrom);t.TimeTo=ko.observable(n.TimeTo);t.ReservedTime=ko.computed(function(){return moment(n.TimeFrom,"HH:mm:ss").format("hh:mm A")+" - "+moment(n.TimeTo,"HH:mm:ss").format("hh:mm A")});t.TimeIn=ko.computed(function(){if(n.TimeIn)return moment(new Date(n.UniversalDateTimeIn),"HH:mm:ss").format("hh:mm A")});t.TimeOut=ko.computed(function(){if(n.TimeOut)return moment(new Date(n.UniversalDateTimeOut),"HH:mm:ss").format("hh:mm A")});t.Comments=ko.observable(n.Comments);t.GuestName=ko.observable(n.GuestName);t.GuestType=ko.observable(n.GuestType);t.GuestMobileNumber=ko.observable(n.GuestMobileNumber);t.IsCancelled=ko.observable(n.IsCancelled);t.GuestTypeCss=ko.computed(function(){return n.GuestTypeId===1?"callin_check":n.GuestTypeId===2?"walkin_check":n.GuestTypeId===2?"mob_check":void 0});t.Reserved=ko.computed(function(){var t;return n.ReservedMinutes?(t=n.ReservedMinutes,t>59?t/60+" hours":t+" min"):"0 min"});t.Status=ko.computed(function(){if(n.IsCancelled!==!0){if(n.TimeIn==null)return"Waiting";if(n.TimeIn&&!n.IsTimeOut)return"In place";if(n.TimeIn&&n.IsTimeOut)return"Time out"}else return"Cancelled"});t.StatusCss=ko.computed(function(){if(n.IsCancelled!==!0){if(n.TimeIn==null)return"orange_bg";if(n.TimeIn&&!n.IsTimeOut)return"blue_bg";if(n.TimeIn&&n.IsTimeOut)return"pink_bg"}else return"pink_bg"});t.IsTimeIn=ko.computed(function(){return n.TimeIn==null&&n.TimeOut==null&&n.IsCancelled!=!0?!0:n.TimeIn!=null&&n.TimeOut==null&&n.IsCancelled!=!0?!1:void 0})}function PagingData(n){var $super=this;this.Page=ko.observable(n.Page);this.PageSize=n.PageSize;this.TotalData=n.TotalData;this.TotalPages=ko.observable(n.TotalPages);this.HasPrev=ko.computed(function(){return $super.Page()>1});this.HasNext=ko.computed(function(){return $super.Page()<$super.TotalPages()});this.GoToPage=function(n){$super.Page(n);reservationViewModel.LoadList()}}function GuestMessage(n){var t=this;t.ReservationId=ko.observable(n.ReservationId);t.isReplied=ko.observable(!1);n.MessageSent&&(t.Message=ko.observable(n.MessageSent),t.isReplied(!1));n.MessageReplied&&(t.Message=ko.observable(n.MessageReplied),t.isReplied(!0));t.GuestName=ko.observable(n.GuestName);t.MessageSentDateTimeUniversal=ko.observable(n.MessageSentDateTimeUniversal);t.MessageFrom=ko.observable(n.MessageSentBy);t.MessageTime=ko.computed(function(){var r=new Date(n.MessageSentDateTimeUniversal),t=r.getHours(),i=r.getMinutes(),u=t>=12?"pm":"am";return t=t%12,t=t?t:12,i=i<10?"0"+i:i,(t<10?"0"+t:t)+":"+i})}function TimeSlot(n){var t=this;t.OpenHourFrom=ko.observable(n.OpenHourFrom);t.OpenHourTo=ko.observable(n.OpenHourTo);t.SpotLeft=ko.observable(n.SpotLeft);t.Time=ko.computed(function(){return moment("1990-01-01 "+n.OpenHourFrom).format("hh:mm A")+" - "+moment("1990-01-01 "+n.OpenHourTo).format("hh:mm A")});t.SetTimeSlot=function(n,t){$(t.currentTarget).siblings().removeClass("active");$(t.currentTarget).addClass("active");$(".input_chk").removeClass("tick");$(t.currentTarget).find(".input_chk").addClass("tick");reservationViewModel.TimeFrom(n.OpenHourFrom());reservationViewModel.TimeTo(n.OpenHourTo())}}var accountSetupViewModel,eventSeatingsViewModel,messageViewModel,metricsViewModel,preferenceViewModel,reservationViewModel;$(function(){$(".sidebar-toggle").click(function(){$(".content-wrapper").toggleClass("in");$("#sidebar").toggleClass("out")});$(".message-link").click(function(){$(".chat-overlay, .chat-box").fadeIn()});$(".chat-close").click(function(){$(".chat-overlay, .chat-box").fadeOut()});$(".add_staff .right_coner li").click(function(){$(".add_staff .right_coner li.active").removeClass("active");$(this).addClass("active");$(".add_staff .input_chk").removeClass("tick")});$(".checkbox").click(function(){$(this).toggleClass("on")});$(".setlabel").click(function(){$(this).toggleClass("on")});$(".navigation_lft li").click(function(){$(".navigation_lft li.active").removeClass("active");$(this).addClass("active")});$(".sidebar-menu_li").click(function(){$(".sidebar-menu_li.active").removeClass("active");$(this).addClass("active");$(".sidebar-menu_li.active").find("span").removeClass("show");$(".sidebar-menu_li.active").find("span").addClass("show")})});$(document).ready(function(){$(".con_p").click(function(){$(this).find('input[type="checkbox"]').is(":checked")?$(this).parents("li").find(".rt_doc").addClass("activation"):$(this).parents("li").find(".rt_doc").removeClass("activation")})});$(function(){$(".navbar ul li").click(function(){$(".navbar ul li.active").removeClass("active");$(this).addClass("active")});$(".nav-link").click(function(){var n=$(this).attr("href");console.log(n);$("html, body").animate({scrollTop:$(n).offset().top-100},1e3);$(".navbar").removeClass("show_navi")});$(".nav-tog_btn").on("click",function(){$(this).next(".navbar").toggleClass("show_navi");$(".updated_hot").toggleClass("on")});$(".seatQ_link ul li").click(function(){$(".seatQ_link ul li.active").removeClass("active");$(this).addClass("active")});$(".seatQ_sign ul li").click(function(){$(".seatQ_sign ul li.active").removeClass("active");$(this).addClass("active")});$(".sec1_txt_ul li").click(function(){$(".sec1_txt_ul li.active").removeClass("active");$(this).addClass("active")});$(".sec2_txt_ul li").click(function(){$(".sec2_txt_ul li.active").removeClass("active");$(this).addClass("active")});$(".sec4_txt_ul li").click(function(){$(".sec4_txt_ul li.active").removeClass("active");$(this).addClass("active")});$(".sec5_txt_ul li").click(function(){$(".sec5_txt_ul li.active").removeClass("active");$(this).addClass("active")});$(".orange--btn").click(function(){$(".orange--btn.active").removeClass("active");$(this).addClass("active")});$(".sec7_txt_ul_1 li").click(function(){$(".sec7_txt_ul_1 li.active").removeClass("active");$(this).addClass("active")});$(".sec7_txt_ul_2 li").click(function(){$(".sec7_txt_ul_2 li.active").removeClass("active");$(this).addClass("active")});$(".sec7_txt_ul_3 li").click(function(){$(".sec7_txt_ul_3 li.active").removeClass("active");$(this).addClass("active")});$(".sec7_txt_ul_4 li").click(function(){$(".sec7_txt_ul_4 li.active").removeClass("active");$(this).addClass("active")});$(".btn_submit").click(function(){$(".btn_submit.active").removeClass("active");$(this).addClass("active")});$(".footer_terms").click(function(){$(".footer_terms.active").removeClass("active");$(this).addClass("active")});$(".items_menu li").click(function(){$(".items_menu li.active").removeClass("active");$(this).addClass("active")});$(document).ready(function(){$("a.screenOne").click(function(n){n.preventDefault();$("#over_lay1").css({opacity:1});$("#over_lay2").css({opacity:0});$("#over_lay3").css({opacity:0})});$("a.screenTwo").click(function(n){n.preventDefault();console.log("clicked");$("#over_lay1").css({opacity:0});$("#over_lay2").css({opacity:1});$("#over_lay3").css({opacity:0})});$("a.screenThree").click(function(n){n.preventDefault();$("#over_lay1").css({opacity:0});$("#over_lay2").css({opacity:0});$("#over_lay3").css({opacity:1})})})});$("body").addClass("message2_body");$(".message-icon").parent().parent().addClass("active");$(".message-icon").addClass("show");$("#MessageType").on("change",function(){$(this).val()==="Welcome"?($(".form_third").hide(),$(".noticep").hide()):($(".form_third").show(),$(".noticep").show())});messageViewModel=new MessageViewModel;ko.applyBindings(messageViewModel);$("body").addClass("preference_body account_setting_body accont_coms");$("#timezone").timezones();accountSetupViewModel=new AccountSetupViewModel;ko.applyBindings(accountSetupViewModel);$("body").addClass("businessprofile_body accont_coms ");$("#timezone").timezones();eventSeatingsViewModel=new EventSeatingsViewModel;ko.applyBindings(eventSeatingsViewModel);const over_in_input=document.getElementById("over_in_input"),show_img=document.getElementById("show_img");show_img.addEventListener("click",function(){event.preventDefault();over_in_input.click()});over_in_input.addEventListener("change",function(n){over_in_input.value?($("#customtxt").innerHTML=over_in_input.value,FileUpload(n,"")):$("#customtxt").innerHTML="No file choosen"});const over_in_input1=document.getElementById("over_in_input1"),show_img1=document.getElementById("show_img1");show_img1.addEventListener("click",function(){event.preventDefault();over_in_input1.click()});over_in_input1.addEventListener("change",function(n){over_in_input1.value?($("#customtxt1").innerHTML=over_in_input1.value,FileUpload(n,"PrivacyPolicy")):$("#customtxt1").innerHTML="No file choosen"});const over_in_input2=document.getElementById("over_in_input2"),show_img2=document.getElementById("show_img2");show_img2.addEventListener("click",function(){event.preventDefault();over_in_input2.click()});over_in_input2.addEventListener("change",function(n){over_in_input2.value?($("#customtxt2").innerHTML=over_in_input2.value,FileUpload(n,"TermsService")):$("#customtxt2").innerHTML="No file choosen"});const over_in_input3=document.getElementById("over_in_input3"),show_img3=document.getElementById("show_img3");show_img3.addEventListener("click",function(){event.preventDefault();over_in_input3.click()});over_in_input3.addEventListener("change",function(n){over_in_input3.value?($("#customtxt3").innerHTML=over_in_input3.value,FileUpload(n,"CummunityGuidelines")):$("#customtxt3").innerHTML="No file choosen"});$.ajaxSetup({beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$.cookie("token"))}});$.ajax({type:"POST",url:webserviceURL+"reservation/getsummary",data:{Date:moment().format("YYYY-MM-DD"),BusinessDetailId:$.cookie("businessid")},success:function(n){$("#businessName").text(n.data.BusinessName);$("#totalSpots").text(n.data.TotalSpots);$("#available").text(n.data.Available);$("#waiting").text(n.data.Waiting);$("#inPlace").text(n.data.InPlace)},error:function(n,t,i){$(".loading-screen").removeClass("show");ShowErrorMessage(n,t,i)}}),function(){function n(n){return n<10?"0"+n:n}function i(){var u=new Date,r=n(u.getHours()),f=n(u.getMinutes()),e=n(u.getSeconds()),o=r>=12?"pm":"am";r=r%12;r=r?r:12;document.getElementById("time").innerHTML='<span class="time-icon"><\/span> '+r+":"+f+":"+e+" "+o;t=setTimeout(function(){i()},1e3)}i()}();$("body").addClass("message2_body");$(".message-icon").parent().parent().addClass("active");$(".message-icon").addClass("show");$("#MessageType").on("change",function(){$(this).val()==="Welcome"?($(".form_third").hide(),$(".noticep").hide()):($(".form_third").show(),$(".noticep").show())});messageViewModel=new MessageViewModel;ko.applyBindings(messageViewModel);$("body").addClass("metrics_body");$(".metrics-icon").parent().parent().addClass("active");$(".metrics-icon").addClass("show");metricsViewModel=new MetricsViewModel;ko.applyBindings(metricsViewModel);$("body").addClass("preference_body accont_coms");preferenceViewModel=new PreferenceViewModel;ko.applyBindings(preferenceViewModel);$("body").addClass("reservation_body");$(".resv-icon").parent().parent().addClass("active");$(".resv-icon").addClass("show");$('[type="date"].date_picker_show').prop("min",function(){return(new Date).toJSON().split("T")[0]});ShowLoader();reservationViewModel=new ReservationViewModel;ko.applyBindings(reservationViewModel);