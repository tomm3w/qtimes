function MetricsViewModel(){var n=this;n.Date=ko.observable(moment().format("YYYY-MM-DD"));n.StartDate=ko.observable(moment().format("YYYY-MM-DD"));n.EndDate=ko.observable(moment().format("YYYY-MM-DD"));n.FilterBy=ko.observable("Today");n.AvgGroupSize=ko.observable();n.Cancelled=ko.observable();n.NewGuest=ko.observable();n.NoOfPlace=ko.observable();n.AvgWaitTime=ko.observable();n.BusinessId=ko.computed(function(){return $.cookie("businessid")});n.Load=function(){ShowLoader();$.ajax({type:"POST",url:webserviceURL+"reservation/metrics",data:{Date:n.Date(),BusinessDetailId:n.BusinessId(),FilterBy:n.FilterBy(),StartDate:n.StartDate(),EndDate:n.EndDate()},success:function(t){n.AvgGroupSize(parseInt(t.data.AvgGroupSize));n.Cancelled(t.data.Cancelled);n.NewGuest(t.data.NewGuest);n.NoOfPlace(t.data.NoOfPlace);n.AvgWaitTime(parseInt(t.data.AvgWaitTime));HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.OnChangeDate=function(){n.StartDate($("#daterange").data("daterangepicker").startDate.format("YYYY/MM/DD"));n.EndDate($("#daterange").data("daterangepicker").endDate.format("YYYY/MM/DD"));n.Load()}}$("body").addClass("metrics_body");$(".metrics-icon").parent().parent().addClass("active");$(".metrics-icon").addClass("show");var metricsViewModel=new MetricsViewModel;ko.applyBindings(metricsViewModel);$(function(){function i(n,t){$("#daterange span").html(n.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}var n=moment(),t=moment();$("#daterange").daterangepicker({startDate:n,endDate:t,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment()],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}},i);i(n,t);metricsViewModel.Load();$("#daterange").on("apply.daterangepicker",function(){metricsViewModel.OnChangeDate()});$("#daterange").on("cancel.daterangepicker",function(){})});