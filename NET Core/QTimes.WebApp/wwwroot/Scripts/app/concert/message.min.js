function MessageViewModel(){var n=this,t;n.Id=ko.observable();n.MessageType=ko.observable();n.Value=ko.observable();n.ValueType=ko.observable();n.BeforeAfter=ko.observable();n.InOut=ko.observable();n.Message=ko.observable();n.ReservationMessages=ko.observableArray([]);n.ConcertEvents=ko.observableArray([]);n.CurrentConcertEvent=ko.observable();n.Mode=ko.observable("ADD");n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events/${n.CurrentConcertEvent()}/messagerules`,contentType:"application/json; charset=utf-8",success:function(t){var i=$.map(t.data.Model,function(n){return new ReservationMessage(n)});n.ReservationMessages(i);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.SaveMessageRule=function(){ShowLoader();n.MessageType()==="Welcome"&&n.Value(0);n.Mode()==="ADD"?$.ajax({type:"POST",url:webserviceURL+`concerts/${n.ConcertId()}/events/${n.CurrentConcertEvent()}/messagerules`,data:{MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),ConcertId:n.ConcertId()},success:function(){$.notify("Reservation message rule added successfully.","success");$("#add-new-reserve_id").modal("hide");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}):$.ajax({type:"PUT",url:webserviceURL+`concerts/${n.ConcertId()}/events/${n.CurrentConcertEvent()}/messagerules`,data:{Id:n.Id(),MessageType:n.MessageType(),Value:n.Value(),ValueType:n.ValueType(),BeforeAfter:n.BeforeAfter(),InOut:n.InOut(),Message:n.Message(),ConcertId:n.ConcertId()},success:function(){$.notify("Reservation message rule updated successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.OnChangeEvent=function(n){$.cookie("eventid",n.CurrentConcertEvent());this.Load()};n.EditMessageRule=function(t){n.ClearAll();n.Mode("UPDATE");$("#add-new-reserve_id").modal("show");n.Id(t.Id());n.MessageType(t.MessageType());$("#MessageType").val(t.MessageType());n.Value(t.Value());n.ValueType(t.ValueType());$("#ValueType").val(t.ValueType());n.BeforeAfter(t.BeforeAfter());$("#BeforeAfter").val(t.BeforeAfter());n.InOut(t.InOut());$("#InOut").val(t.InOut());n.Message(t.Message());$(".selectpicker").selectpicker("refresh")};n.AddMessageRule=function(){n.ClearAll();$("#add-new-reserve_id").modal("show")};n.DeleteMessageRule=function(t){confirm("Are you sure you want to delete this message rule?")&&(ShowLoader(),$.ajax({type:"DELETE",url:webserviceURL+`concerts/${n.ConcertId()}/events/${n.CurrentConcertEvent()}/messagerules/${t.Id()}`,success:function(){n.Load();HideLoader();$.notify("Reservation message rule deleted successfully.","success")},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}))};n.ClearAll=function(){n.Id("");n.MessageType("");n.Value("");n.ValueType("");n.BeforeAfter("");n.InOut("");n.Message("");n.Mode("ADD")};t="?Page=1&PageSize=65535";$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events`+t,contentType:"application/json; charset=utf-8",success:function(t){n.ConcertEvents(t.data.Model);n.CurrentConcertEvent(n.ConcertEvents()[0].Id);$.cookie("eventid",n.ConcertEvents()[0].Id);$(".selectpicker").selectpicker("refresh");n.Load()},error:function(n,t,i){ShowErrorMessage(n,t,i)}})}function ReservationMessage(n){var t=this;t.Id=ko.observable(n.Id);t.MessageType=ko.observable(n.MessageType);t.Value=ko.observable(n.Value);t.ValueType=ko.observable(n.ValueType);t.BeforeAfter=ko.observable(n.BeforeAfter);t.InOut=ko.observable(n.InOut);t.Message=ko.observable(n.Message);t.Rules=ko.computed(function(){return n.MessageType==="Welcome"?"Welcome Message":n.Value+" "+n.ValueType+" "+n.BeforeAfter+" "+n.InOut})}$("body").addClass("message2_body concert__event concert_message_body");$(".message-icon").parent().parent().addClass("active");$(".message-icon").addClass("show");$("#MessageType").on("change",function(){$(this).val()==="Welcome"?($(".form_third").hide(),$(".noticep").hide()):($(".form_third").show(),$(".noticep").show())});var messageViewModel=new MessageViewModel;ko.applyBindings(messageViewModel);