function ReservationViewModel(){var n=this;n.Guests=ko.observableArray([]);n.Seatings=ko.observableArray([]);n.Reservations=ko.observableArray([]);n.pagingdata=ko.observable(new PagingData({Page:1,PageSize:100,TotalData:0,TotalPages:0}));n.SearchText=ko.observable("");n.Load=function(){ShowLoader();var t="?Page="+n.pagingdata().Page()+"&PageSize="+n.pagingdata().PageSize;t=t+"&ConcertId="+concertId;n.SearchText()&&(t=t+"&SearchText="+n.SearchText());$.ajax({type:"GET",url:webserviceURL+`concerts/${concertId}/events/${eventId}/checkin`+t,contentType:"application/json; charset=utf-8",success:function(t){var r=$.map(t.data.Model,function(n){return new Reservation(n)}),i;n.Reservations(r);i=new PagingData(t.data.PagingModel);n.pagingdata(i);$(".plus_more_f").click(function(){$(".plus_more_f").show();$(".minus_less_f").hide();$(this).hide();$(".head_tr").removeClass("show");$(".togg").removeClass("show");$(this).parents(".head_tr").next("tr.togg").addClass("show");$(this).parents(".head_tr").closest("tr.togg").addClass("show");$(this).parents(".head_tr").find(".minus_less_f").show()});$(".minus_less_f").click(function(){$(this).hide();$(".togg.show").removeClass("show");$(this).parents(".head_tr").find(".plus_more_f").show()});$(".big_grn").click(function(){$(this).parents("li").find(".rt_input_gr_txt").toggleClass("activation")});HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddReservation=function(n){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+"concertreservation/updatecheckin",url:webserviceURL+`concerts/${concertId}/events/${eventId}/checkin`,data:{ConcertGuestId:n.ConcertGuestId(),ConcertEventReservationId:n.ConcertEventReservationId(),Temperature:n.Temperature(),IsCheckedIn:n.IsCheckedIn(),IsSolo:n.IsSolo()},success:function(){HideLoader();$.notify("Reservation updated successfully.","success")},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};$(".search_input").on("keydown",function(t){t.which===13&&n.Load()});n.Load()}function PagingData(n){var $super=this;this.Page=ko.observable(n.Page);this.PageSize=n.PageSize;this.TotalData=n.TotalData;this.TotalPages=ko.observable(n.TotalPages);this.HasPrev=ko.computed(function(){return $super.Page()>1});this.HasNext=ko.computed(function(){return $super.Page()<$super.TotalPages()});this.GoToPage=function(n){$super.Page(n);reservationViewModel.LoadList()}}function Reservation(n){var t=this;t.Id=ko.observable(n.Id);t.GuestTypeId=ko.observable(n.GuestTypeId);t.Size=ko.observable(n.Size);t.MainGuestName=ko.observable(n.MainGuestName);t.GuestType=ko.observable(n.GuestType);t.DOB=ko.observable(n.DOB);t.MainGuestMobileNo=ko.observable(n.MainGuestMobileNo);t.MainGuestAddress=ko.observable(n.MainGuestAddress);t.MainGuestCity=ko.observable(n.MainGuestCity);t.MainGuestState=ko.observable(n.MainGuestState);t.MainGuestZip=ko.observable(n.MainGuestZip);t.MainGuestEmail=ko.observable(n.MainGuestEmail);t.SeatNo=ko.observable(n.SeatNo);t.ConfirmationNo=ko.observable(n.ConfirmationNo);t.ConcertGuestId=ko.observable(n.ConcertGuestId);t.CheckInTime=ko.computed(function(){return moment(new Date(n.CheckInTime),"HH:mm:ss").format("hh:mm A")});t.PhotoFullPath=ko.computed(function(){return n.FacePhotoImageBase64?"data:image/jpeg;base64,"+n.FacePhotoImageBase64:"/content/assets/images/staff_grey.png"});t.Guests=ko.computed(function(){return $.map(n.Guests,function(n){return new Guest(n)})})}function Guest(n){var t=this;t.ConcertEventReservationId=ko.observable(n.ConcertEventReservationId);t.ConcertGuestId=ko.observable(n.ConcertGuestId);t.IsCheckedIn=ko.observable(n.IsCheckedIn);t.Temperature=ko.observable(n.Temperature);t.Name=ko.observable(n.Name);t.MobileNo=ko.observable(n.MobileNo);t.Email=ko.observable(n.Email);t.SeatNo=ko.observable(n.SeatNo);t.IsMainGuest=ko.observable(n.IsMainGuest);t.IsSolo=ko.observable(n.IsSolo);t.IsWSomeone=ko.observable(!n.IsSolo);t.CheckInTime=ko.computed(function(){return n.CheckInTime?moment(new Date(n.CheckInTime)).format("MM/DD/YYYY hh:mm A"):""})}function HideLoader(){$(".loader").addClass("hidden")}function ShowLoader(){$(".loader").removeClass("hidden")}var reservationViewModel=new ReservationViewModel;ko.applyBindings(reservationViewModel);