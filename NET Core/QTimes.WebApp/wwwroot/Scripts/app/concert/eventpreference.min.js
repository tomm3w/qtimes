function EventSeatingsViewModel(){var n=this;n.EventName=ko.observable();n.EnableTotalCapacity=ko.observable();n.TotalCapacity=ko.observable();n.EnableGroupSize=ko.observable();n.MinGroupSize=ko.observable();n.MaxGroupSize=ko.observable();n.EnableTimeExpiration=ko.observable();n.TimeExpiration=ko.observable();n.IsDLScanEnabled=ko.observable();n.IsChargeEnabled=ko.observable();n.IsSeatmapEnabled=ko.observable();n.SeatType=ko.observable();n.SeatMapPath=ko.observable();n.SeatMapFullPath=ko.observable();n.AllowCheckInTime=ko.observable();n.ConcertSeatings=ko.observableArray([]);n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events/${eventid}`,contentType:"application/json; charset=utf-8",success:function(t){n.EventName(t.data.Name);n.EnableTotalCapacity(t.data.EnableTotalCapacity);n.TotalCapacity(t.data.TotalCapacity);n.EnableGroupSize(t.data.EnableGroupSize);n.MinGroupSize(t.data.MinGroupSize);n.MaxGroupSize(t.data.MaxGroupSize);n.EnableTimeExpiration(t.data.EnableTimeExpiration);n.TimeExpiration(t.data.TimeExpiration);n.IsDLScanEnabled(t.data.IsDLScanEnabled);n.IsChargeEnabled(t.data.IsChargeEnabled);n.IsSeatmapEnabled(t.data.IsSeatmapEnabled);$(".selectpicker").selectpicker("refresh");n.SeatType(t.data.SeatType);n.SeatMapPath(t.data.SeatMapPath);n.SeatMapFullPath(t.data.SeatMapFullPath);n.AllowCheckInTime(t.data.AllowCheckInTime);var i=$.map(t.data.ConcertSeatings,function(n){return new ConcertSeating(n.Id,n.Name,n.Spots,n.SeatsPerSpot,n.CheckInTime)});n.ConcertSeatings(i);$("#accountlogo").attr("src",t.data.SeatMapFullPath);t.data.EnableTotalCapacity&&t.data.TotalSeatingsAdded<t.data.TotalCapacity&&Notify(`Warning: Total seatings capacity ${t.data.TotalCapacity}: 
                                     Only ${t.data.TotalSeatingsAdded} seatings defined. 
                                     Please add remaining ${t.data.TotalCapacity-t.data.TotalSeatingsAdded} seats.`);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdatePreference=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+`concerts/${n.ConcertId()}/events/${eventid}/preference`,data:{EnableTotalCapacity:n.EnableTotalCapacity(),TotalCapacity:n.TotalCapacity(),EnableGroupSize:n.EnableGroupSize(),MinGroupSize:n.MinGroupSize(),MaxGroupSize:n.MaxGroupSize(),EnableTimeExpiration:n.EnableTimeExpiration(),TimeExpiration:n.TimeExpiration(),IsDLScanEnabled:n.IsDLScanEnabled(),IsChargeEnabled:n.IsChargeEnabled(),IsSeatmapEnabled:n.IsSeatmapEnabled(),ConcertId:n.ConcertId(),Id:eventid},success:function(){$.notify("Preferences has been updated","success");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdateSeating=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+`concerts/${n.ConcertId()}/events/${eventid}/seating`,data:{SeatType:n.SeatType(),SeatMapPath:n.SeatMapPath(),AllowCheckInTime:n.AllowCheckInTime(),ConcertSeatings:n.ConcertSeatings(),ConcertId:n.ConcertId()},success:function(){$.notify("Seatings updated successfully.","success");$("#add-new-reserve_id").modal("hide");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddSeats=function(){n.ConcertSeatings.push(new ConcertSeating(0,"",1,1,"00:00:00"))};n.Load()}function ConcertSeating(n,t,i,r,u){var f=this;f.Id=ko.observable(n);f.Name=ko.observable(t);f.Spots=ko.observable(i);f.SeatsPerSpot=ko.observable(r);f.CheckInTime=ko.observable(u);f.Delete=function(n){eventSeatingsViewModel.ConcertSeatings.remove(n)}}function FileUpload(n){var i=n.target.files,u=n.target.id,r,t;if(i.length>0&&window.FormData!==undefined){for(ShowLoader(),r=new FormData,t=0;t<i.length;t++)r.append("file"+t,i[t]);$.ajax({type:"POST",url:webserviceURL+"reservationsetting/upload",contentType:!1,processData:!1,data:r,headers:{Authorization:"Bearer "+$.cookie("token")},success:function(n){$("#accountlogo").attr("src",n.data.ImageFullPath);eventSeatingsViewModel.SeatMapPath(n.data.ImageName);HideLoader()},error:function(n,t,i){HideLoader();var r="Error  "+t+" "+i;n.responseText&&n.responseText[0]==="{"?(r=JSON.parse(n.responseText).message,$.notify(r,"error")):ShowErrorMessage(n,t,i)}})}}$("body").addClass("preference_body accont_coms concert__event concert_preference_body");var eventSeatingsViewModel=new EventSeatingsViewModel;ko.applyBindings(eventSeatingsViewModel);const over_in_input=document.getElementById("over_in_input"),show_img=document.getElementById("show_img");show_img.addEventListener("click",function(){event.preventDefault();over_in_input.click()});over_in_input.addEventListener("change",function(n){over_in_input.value?($("#customtxt").innerHTML=over_in_input.value,FileUpload(n)):$("#customtxt").innerHTML="No file choosen"});