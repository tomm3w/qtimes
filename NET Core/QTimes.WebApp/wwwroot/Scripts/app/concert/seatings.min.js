function EventSeatingsViewModel(){var n=this;n.EventName=ko.observable();n.SeatType=ko.observable();n.SeatMapPath=ko.observable();n.SeatMapFullPath=ko.observable();n.AllowCheckInTime=ko.observable();n.ConcertSeatings=ko.observableArray([]);n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+"concertreservationsetting/concert/"+n.ConcertId(),contentType:"application/json; charset=utf-8",success:function(t){n.EventName(t.data.Name);n.SeatType(t.data.SeatType);n.SeatMapPath(t.data.SeatMapPath);n.SeatMapFullPath(t.data.SeatMapFullPath);n.AllowCheckInTime(t.data.AllowCheckInTime);var i=$.map(t.data.ConcertSeatings,function(n){return new ConcertSeating(n.Id,n.Name,n.Spots,n.SeatsPerSpot,n.CheckInTime)});n.ConcertSeatings(i);$("#accountlogo").attr("src",t.data.SeatMapFullPath);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdateSeating=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+"concertreservationsetting/UpdateConcertSeating",data:{SeatType:n.SeatType(),SeatMapPath:n.SeatMapPath(),AllowCheckInTime:n.AllowCheckInTime(),ConcertSeatings:n.ConcertSeatings(),ConcertId:n.ConcertId()},success:function(){$.notify("Seatings updated successfully.","success");HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddSeats=function(){n.ConcertSeatings.push(new ConcertSeating(0,"",1,1,"00:00:00"))};n.Load()}function ConcertSeating(n,t,i,r,u){var f=this;f.Id=ko.observable(n);f.Name=ko.observable(t);f.Spots=ko.observable(i);f.SeatsPerSpot=ko.observable(r);f.CheckInTime=ko.observable(u);f.Delete=function(n){eventSeatingsViewModel.ConcertSeatings.remove(n)}}function FileUpload(n){var i=n.target.files,u=n.target.id,r,t;if(i.length>0&&window.FormData!==undefined){for(ShowLoader(),r=new FormData,t=0;t<i.length;t++)r.append("file"+t,i[t]);$.ajax({type:"POST",url:webserviceURL+"reservationsetting/upload",contentType:!1,processData:!1,data:r,headers:{Authorization:"Bearer "+$.cookie("token")},success:function(n){$("#accountlogo").attr("src",n.data.ImageFullPath);eventSeatingsViewModel.SeatMapPath(n.data.ImageName);HideLoader()},error:function(n,t,i){HideLoader();var r="Error  "+t+" "+i;n.responseText&&n.responseText[0]==="{"?(r=JSON.parse(n.responseText).message,$.notify(r,"error")):ShowErrorMessage(n,t,i)}})}}$("body").addClass("businessprofile_body accont_coms concert__event concert_seating");var eventSeatingsViewModel=new EventSeatingsViewModel;ko.applyBindings(eventSeatingsViewModel);const over_in_input=document.getElementById("over_in_input"),show_img=document.getElementById("show_img");show_img.addEventListener("click",function(){event.preventDefault();over_in_input.click()});over_in_input.addEventListener("change",function(n){over_in_input.value?($("#customtxt").innerHTML=over_in_input.value,FileUpload(n)):$("#customtxt").innerHTML="No file choosen"});