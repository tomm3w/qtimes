function EventSeatingsViewModel(){var n=this;n.EventName=ko.observable();n.ConcertEventId=ko.observable();n.PassTemplateId=ko.observable();n.Description=ko.observable();n.ImagePath=ko.observable();n.ImageFullPath=ko.observable();n.VirtualNo=ko.observable();n.PhoneNo=ko.observable();n.MobileNo=ko.observable();n.ShortUrl=ko.observable();n.MobilePageUrl=ko.observable();n.EnablePrivacyPolicy=ko.observable();n.EnableServiceTerms=ko.observable();n.EnableCommunityGuidelines=ko.observable();n.IsExpired=ko.observable(!1);n.ExpiredTitle=ko.observable("");n.PrivacyPolicyFilePath=ko.observable();n.PrivacyPolicyFileFullPath=ko.observable();n.PrivacyPolicyFileName=ko.computed(function(){return n.PrivacyPolicyFilePath()?"Click to view":"No file chosen"});n.ServiceTermsFilePath=ko.observable();n.ServiceTermsFileFullPath=ko.observable();n.ServiceTermsFileName=ko.computed(function(){return n.ServiceTermsFilePath()?"Click to view":"No file chosen"});n.CummunityGuidelinesFilePath=ko.observable();n.CummunityGuidelinesFileFullPath=ko.observable();n.CummunityGuidelinesFileName=ko.computed(function(){return n.CummunityGuidelinesFilePath()?"Click to view":"No file chosen"});n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.Load=function(){ShowLoader();$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events/${eventid}`,contentType:"application/json; charset=utf-8",success:function(t){n.EventName(t.data.Name);n.ConcertEventId(t.data.ConcertEventId);n.Description(t.data.Description);n.PassTemplateId(t.data.PassTemplateId);n.ImagePath(t.data.ImagePath);n.ImageFullPath(t.data.ImageFullPath);n.EnablePrivacyPolicy(t.data.EnablePrivacyPolicy);n.EnableServiceTerms(t.data.EnableServiceTerms);n.EnableCommunityGuidelines(t.data.EnableCommunityGuidelines);n.PrivacyPolicyFilePath(t.data.PrivacyPolicyFilePath);n.PrivacyPolicyFileFullPath(t.data.PrivacyPolicyFileFullPath);n.ServiceTermsFilePath(t.data.ServiceTermsFilePath);n.ServiceTermsFileFullPath(t.data.ServiceTermsFileFullPath);n.CummunityGuidelinesFilePath(t.data.CummunityGuidelinesFilePath);n.CummunityGuidelinesFileFullPath(t.data.CummunityGuidelinesFileFullPath);n.VirtualNo(t.data.VirtualNo);n.PhoneNo(t.data.PhoneNo);n.MobileNo(t.data.MobileNo);n.ShortUrl(t.data.ShortUrl);moment().startOf("day").toDate()>moment(t.data.Date).startOf("day").toDate()&&(n.ExpiredTitle("Link expired"),n.IsExpired(!0));$("#accountlogo").attr("src",t.data.ImageFullPath);$("#staffUrl").val(`${window.location.origin}/checkin/concerts/${n.ConcertId()}/events/${n.ConcertEventId()}`);$("#mobileUrl").val(`${window.location.origin}/m/concerts/${n.ConcertId()}/events/${n.ConcertEventId()}`);loadQrCode(t.data.ShortUrl);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.UpdateProfile=function(){ShowLoader();$.ajax({type:"PUT",url:webserviceURL+`concerts/${n.ConcertId()}/events/${eventid}/businessprofile`,data:{Description:n.Description(),ImagePath:n.ImagePath(),EnablePrivacyPolicy:n.EnablePrivacyPolicy(),EnableServiceTerms:n.EnableServiceTerms(),EnableCommunityGuidelines:n.EnableCommunityGuidelines(),PrivacyPolicyFilePath:n.PrivacyPolicyFilePath(),ServiceTermsFilePath:n.ServiceTermsFilePath(),CummunityGuidelinesFilePath:n.CummunityGuidelinesFilePath(),ConcertId:n.ConcertId(),PassTemplateId:n.PassTemplateId(),VirtualNo:n.VirtualNo(),PhoneNo:n.PhoneNo(),MobileNo:n.MobileNo(),ShortUrl:n.ShortUrl(),Id:eventid},success:function(){$.notify("Business profile updated successfully.","success");loadQrCode(n.ShortUrl());HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.Load()}function FileUpload(n,t){var r=n.target.files,f=n.target.id,u,i;if(r.length>0&&window.FormData!==undefined){for(ShowLoader(),u=new FormData,i=0;i<r.length;i++)u.append("file"+i,r[i]);$.ajax({type:"POST",url:webserviceURL+"reservationsetting/upload",contentType:!1,processData:!1,data:u,headers:{Authorization:"Bearer "+$.cookie("token")},success:function(n){t==="PrivacyPolicy"?(eventSeatingsViewModel.PrivacyPolicyFilePath(n.data.ImageName),eventSeatingsViewModel.PrivacyPolicyFileFullPath(n.data.ImageFullPath)):t==="TermsService"?(eventSeatingsViewModel.ServiceTermsFilePath(n.data.ImageName),eventSeatingsViewModel.ServiceTermsFileFullPath(n.data.ImageFullPath)):t==="CummunityGuidelines"?(eventSeatingsViewModel.CummunityGuidelinesFilePath(n.data.ImageName),eventSeatingsViewModel.CummunityGuidelinesFileFullPath(n.data.ImageFullPath)):($("#accountlogo").attr("src",n.data.ImageFullPath),eventSeatingsViewModel.ImagePath(n.data.ImageName));HideLoader()},error:function(n,t,i){HideLoader();var r="Error  "+t+" "+i;n.responseText&&n.responseText[0]==="{"?(r=JSON.parse(n.responseText).message,$.notify(r,"error")):ShowErrorMessage(n,t,i)}})}}function downloadImage(){var n=document.createElement("a");n.href=document.getElementById("qrcode").src;n.download="qrcode.png";document.body.appendChild(n);n.click()}function loadQrCode(n){if(n)try{let t=document.createElement("canvas");bwipjs.toCanvas(t,{bcid:"qrcode",text:n,scale:5});document.getElementById("qrcode").src=t.toDataURL("image/png")}catch(t){}else document.getElementById("qrcode").src="/images/noimage.png"}$("body").addClass("businessprofile_body accont_coms concert__event concert_profile_body");var eventSeatingsViewModel=new EventSeatingsViewModel;ko.applyBindings(eventSeatingsViewModel);const over_in_input=document.getElementById("over_in_input"),show_img=document.getElementById("show_img");show_img.addEventListener("click",function(){event.preventDefault();over_in_input.click()});over_in_input.addEventListener("change",function(n){over_in_input.value?($("#customtxt").innerHTML=over_in_input.value,FileUpload(n,"BusinessImage")):$("#customtxt").innerHTML="No file choosen"});const over_in_input1=document.getElementById("over_in_input1"),show_img1=document.getElementById("show_img1");show_img1.addEventListener("click",function(){event.preventDefault();over_in_input1.click()});over_in_input1.addEventListener("change",function(n){over_in_input1.value?($("#customtxt1").innerHTML=over_in_input1.value,FileUpload(n,"PrivacyPolicy")):$("#customtxt1").innerHTML="No file choosen"});const over_in_input2=document.getElementById("over_in_input2"),show_img2=document.getElementById("show_img2");show_img2.addEventListener("click",function(){event.preventDefault();over_in_input2.click()});over_in_input2.addEventListener("change",function(n){over_in_input2.value?($("#customtxt2").innerHTML=over_in_input2.value,FileUpload(n,"TermsService")):$("#customtxt2").innerHTML="No file choosen"});const over_in_input3=document.getElementById("over_in_input3"),show_img3=document.getElementById("show_img3");show_img3.addEventListener("click",function(){event.preventDefault();over_in_input3.click()});over_in_input3.addEventListener("change",function(n){over_in_input3.value?($("#customtxt3").innerHTML=over_in_input3.value,FileUpload(n,"CummunityGuidelines")):$("#customtxt3").innerHTML="No file choosen"});