function MetricsViewModel(){var n=this,t;n.Date=ko.observable(moment().format("YYYY-MM-DD"));n.TotalGuests=ko.observable();n.TotalEvents=ko.observable();n.TotalReservations=ko.observable();n.ConcertEvents=ko.observableArray([]);n.CurrentConcertEvent=ko.observable();n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.Load=function(){var t="";if(n.CurrentConcertEvent())t=`?concertEventId=${n.CurrentConcertEvent()}`;else return!1;ShowLoader();$.post({type:"POST",url:webserviceURL+`concerts/${n.ConcertId()}/metrics`+t,data:{Date:n.Date(),ConcertId:n.ConcertId()},success:function(t){n.TotalGuests(parseInt(t.data.TotalGuests));n.TotalEvents(t.data.TotalEvents);n.TotalReservations(t.data.TotalReservations);HideLoader();RefreshSummary()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.OnChangeDate=function(){var t=$("#select_onday").val();n.Date(moment().subtract(t,"days").format("YYYY-MM-DD"));n.Load()};n.OnChangeEvent=function(n){$.cookie("eventid",n.CurrentConcertEvent());this.Load()};t="?Page=1&PageSize=65535";$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events`+t,contentType:"application/json; charset=utf-8",success:function(t){n.ConcertEvents(t.data.Model);$(".selectpicker").selectpicker("refresh");n.Load()},error:function(n,t,i){ShowErrorMessage(n,t,i)}})}$("body").addClass("metrics_body concert__event concert_mertics_body");$(".metrics-icon").parent().parent().addClass("active");$(".metrics-icon").addClass("show");var metricsViewModel=new MetricsViewModel;ko.applyBindings(metricsViewModel);