function EventViewModel(){var n=this;n.Id=ko.observable();n.Name=ko.observable();n.Date=ko.observable();n.TimeFrom=ko.observable();n.TimeTo=ko.observable();n.Events=ko.observableArray([]);n.Mode=ko.observable("ADD");n.ConcertId=ko.computed(function(){return $.cookie("concertid")});n.SearchText=ko.observable("");n.FilterBy=ko.observable("All");n.Load=function(){ShowLoader();var t="?FilterBy="+n.FilterBy();n.SearchText()&&(t=t+"&SearchText="+n.SearchText());$.ajax({type:"GET",url:webserviceURL+`concerts/${n.ConcertId()}/events`+t,contentType:"application/json; charset=utf-8",success:function(t){var i=$.map(t.data.Model,function(n){return new ConcertEvent(n)});n.Events(i);HideLoader()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.Save=function(){ShowLoader();n.Mode()==="ADD"?$.ajax({type:"POST",url:webserviceURL+`concerts/${n.ConcertId()}/events`,data:{Name:n.Name(),Date:n.Date(),TimeFrom:n.TimeFrom(),TimeTo:n.TimeTo(),ConcertId:n.ConcertId()},success:function(){$.notify("Event added successfully.","success");$("#add-new-reserve_id").modal("hide");HideLoader();n.Load();n.ClearAll()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}):$.ajax({type:"PUT",url:webserviceURL+`concerts/${n.ConcertId()}/events/${n.Id()}`,data:{Id:n.Id(),Name:n.Name(),Date:n.Date(),TimeFrom:n.TimeFrom(),TimeTo:n.TimeTo(),ConcertId:n.ConcertId()},success:function(){$.notify("Event updated successfully.","success");$("#add-new-reserve_id").modal("hide");n.ClearAll();HideLoader();n.Load()},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}})};n.AddEvent=function(){n.ClearAll();n.Mode("ADD");$("#add-new-reserve_id").modal("show")};n.EditEvent=function(t){n.ClearAll();n.Mode("UPDATE");$("#add-new-reserve_id").modal("show");n.Id(t.Id());n.Name(t.Name());n.Date(t.Date());n.TimeFrom(t.TimeFrom());n.TimeTo(t.TimeTo())};n.DeleteEvent=function(t){confirm(`Are you sure you want to delete this event "${t.Name()}"?`)&&(ShowLoader(),$.ajax({type:"DELETE",url:webserviceURL+`concerts/${n.ConcertId()}/events/${t.Id()}`,success:function(t){n.Load();HideLoader();$.notify(`Concert event "${t.Name()}" deleted successfully.`,"success")},error:function(n,t,i){HideLoader();ShowErrorMessage(n,t,i)}}))};n.ClearAll=function(){n.Id("");n.Name("");n.Date("");n.TimeFrom("");n.TimeTo("");n.Mode("ADD")};n.OnChangeEvent=function(){n.FilterBy($("#ddFilterBy").val());n.Load()};n.OnChangeDate=function(){var t=event.target.value;n.EventDate(t);n.Load()};$(".search_input").on("keydown",function(t){t.which===13&&n.Load()});n.Load()}function ConcertEvent(n){var t=this;t.Id=ko.observable(n.Id);t.Name=ko.observable(n.Name);t.Date=ko.observable(n.EventDate);t.DateFormated=ko.observable(moment(new Date(n.EventDate)).format("MM/DD/YYYY"));t.TimeFrom=ko.observable(n.TimeFrom);t.TimeFromFormated=ko.observable(moment("1990-01-01 "+n.TimeFrom).format("hh:mm A"));t.TimeTo=ko.observable(n.TimeTo);t.TimeToFormated=ko.observable(moment("1990-01-01 "+n.TimeTo).format("hh:mm A"));t.Preferences=function(){location.href="/concert/events/preferences/"+n.Id};t.Seatings=function(){location.href="/concert/events/seatings/"+n.Id};t.Preferences=function(){location.href="/concert/events/preferences/"+n.Id};t.Business=function(){location.href="/concert/events/business/"+n.Id}}$("body").addClass("reservation_body concert__event concert_events");$(".event-icon").parent().parent().addClass("active");$(".event-icon").addClass("show");var eventViewModel=new EventViewModel;ko.applyBindings(eventViewModel);